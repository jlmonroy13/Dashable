!function(){angular.module("CheckIn",["ngRoute","angular-google-gapi","LocalStorageModule","selectize","angular-momentjs","ngLoadingSpinner","ngAlertify"])}(),function(){function a(a){a.when("/checkin",{templateUrl:"/assets/templates/pages/checkin/index.html",controller:"createCheckinController",controllerAs:"checkinCtrl"}).when("/history",{templateUrl:"/assets/templates/pages/history/index.html",controller:"getHistoryController",controllerAs:"historyCtrl"}).when("/edit-checkin/:id",{templateUrl:"/assets/templates/pages/checkin/index.html",controller:"editCheckinController",controllerAs:"checkinCtrl"}).when("/",{templateUrl:"/assets/templates/pages/home/index.html",controller:"loginController",controllerAs:"login"}).otherwise({redirectTo:"/"})}angular.module("CheckIn").config(a),a.$inject=["$routeProvider"]}(),function(){function a(a,b,c,d,e){e.gdata=d;var f="767533878479-svf3420ha7ggdrgoqq78kuanbm777ckc.apps.googleusercontent.com";c.load("oauth2","v2"),b.setClient(f),b.setScope("https://www.googleapis.com/auth/userinfo.email")}function b(a,b,c){a.setPrefix("CheckIn").setNotify(!0,!0),b.interceptors.push("httpInterceptorFactory"),c.asyncLoading(!1).scriptUrl("//cdnjs.cloudflare.com/ajax/libs/moment.js/2.5.1/moment.min.js")}function c(){return function(a){return a.slice().reverse()}}angular.module("CheckIn").run(a),a.$inject=["$location","GAuth","GApi","GData","$rootScope"],angular.module("CheckIn").config(b),b.$inject=["localStorageServiceProvider","$httpProvider","$momentProvider"],angular.module("CheckIn").filter("reverse",c)}(),function(){function a(a,b,c,d,e){function f(){function c(a){}function d(){return b.login().then(e)}function e(){return b.getToken().then(f)}function f(b){return a.post("http://dashable-netsuite-api-prod.herokuapp.com/users/auth/google_oauth2/callback?access_token="+b.access_token).then(function(a){return g("jwt",a.data.response.jwt),a.data})}return b.checkAuth().then(c,d)}function g(a,b){return e.log("Welcome! you have signed up successfully"),d.set(a,b)}var h={login:f};return h}angular.module("CheckIn").factory("authenticationFactory",a),a.$inject=["$http","GAuth","GData","localStorageService","alertify"]}(),function(){function a(a){var b={request:function(b){var c=a.get("jwt");return""!==c&&(b.headers.Authorization="Bearer "+c),b}};return b}angular.module("CheckIn").factory("httpInterceptorFactory",a),a.$inject=["localStorageService"]}(),function(){function a(a){function b(){var b={async:!0,crossDomain:!0,url:k+"api/1/projects",method:"GET",headers:{"content-type":"application/json"}};return a(b).then(function(a){return a.data})}function c(b){var c={async:!0,crossDomain:!0,url:k+"api/1/projects/"+b+"/tasks",method:"GET",headers:{"content-type":"application/json"}};return a(c).then(function(a){return a.data})}function d(){var b={async:!0,crossDomain:!0,url:k+"api/1/time_bills/recent",method:"GET",headers:{"content-type":"application/json"}};return a(b).then(function(a){return a.data})}function e(){var b={async:!0,crossDomain:!0,url:k+"api/1/time_bills/history",method:"GET",headers:{"content-type":"application/json"}};return a(b).then(function(a){return l=a.data.response,console.log(l),a.data})}function f(b){return a.post(k+"api/1/time_bills",b).then(function(a){return a})}function g(b){return a["delete"](k+"api/1/time_bills/"+b).then(function(a){return a})}function h(b,c){return a.put(k+"api/1/time_bills/"+b,c).then(function(a){return a})}function i(a){return angular.forEach(l,function(b,c){b.id==a&&(j=b)}),j}var j,k="http://dashable-netsuite-api-prod.herokuapp.com/",l=[],m={getUserProjects:b,getProjectTask:c,getTimeBills:d,getCheckinsHistory:e,createCheckin:f,deleteCheckin:g,returnCheckin:i,updateCheckin:h};return m}angular.module("CheckIn").factory("checkinFactory",a),a.$inject=["$http"]}(),function(){function a(a){function b(b){i=b,k=[],g=a(i).day("Saturday"),j=moment(g).to(i,!0),h=parseInt(j),isNaN(h)&&(h="a day"==j?1:0),k.push({day:a(i).format("dddd"),numberday:a(i).format("D"),dateToDisplay:a(i).format("dddd, MMM D"),date:a(i).format("YYYY-MM-DD"),selected:!0,checkin:!1,future:!1}),6==h?c(6):5==h?c(3):4==h?c(5):3==h?c(7):2==h?c(9):1==h?c(11):0==h&&c(13);for(var l=1;h+1>l;l++)d=a(i).add(l,"days").format("YYYY-MM-DD"),e=a(i).add(l,"days").format("dddd"),f=a(i).add(l,"days").format("D"),dateToDisplay=a(i).add(l,"days").format("dddd, MMM D"),k.unshift({day:e,numberday:f,dateToDisplay:dateToDisplay,date:d,selected:!1,checkin:!1,future:!0});return k=$.grep(k,function(a){return"Sunday"!=a.day})}function c(b){for(var c=1;h+b>c;c++)d=a(i).subtract(c,"days").format("YYYY-MM-DD"),e=a(i).subtract(c,"days").format("dddd"),f=a(i).subtract(c,"days").format("D"),dateToDisplay=a(i).subtract(c,"days").format("dddd, MMM D"),k.push({day:e,numberday:f,dateToDisplay:dateToDisplay,date:d,selected:!1,checkin:!1,future:!1})}var d,e,f,g,h,i,j,k=[],l={get2weeks:b};return l}angular.module("CheckIn").factory("getweeksFactory",a),a.$inject=["$moment"]}(),function(){function a(a,b){function c(){function c(c){b.confirm("Are you sure you want to delete this Check-in?",function(){console.log(c.id),vm.deleteCheckin={time_bill:{project_id:c.project.id,task_id:c.task.id,duration:c.hours,tran_date:c.date,memo:c.memo}},console.log(vm.deleteCheckin),a.deleteCheckin(c.id).then(function(a){console.log(a),vm.deleteStatus=!0})},function(){})}vm=this,vm.removeCheckin=c,vm.deleteCheckin={time_bill:{project_id:"",task_id:"",duration:"",tran_date:"",memo:""}}}var d={restrict:"E",templateUrl:"/assets/templates/pages/history/history-items.html",bindToController:{checkins:"=",deleteStatus:"="},controllerAs:"vm",controller:c};return d}angular.module("CheckIn").directive("historyItems",a),a.$inject=["checkinFactory","alertify"]}(),function(){function a(){function a(){function a(a){0==a.future&&(vm.date={dateToDisplay:a.dateToDisplay,day:a.day,numberday:a.numberday,dateFormat:a.date},b(a))}function b(a){vm.resetSelectedDates(),a.selected=!0,vm.checkin.time_bill.tran_date=vm.date.dateFormat}vm=this,vm.getDate=a}var b={restrict:"E",templateUrl:"/assets/templates/pages/checkin/calendar-week.html",bindToController:{week:"=",date:"=",checkin:"=",resetSelectedDates:"&"},controllerAs:"vm",controller:a};return b}angular.module("CheckIn").directive("calendarWeek",a)}(),function(){function a(a,b,c,d,e){function f(){b.login().then(function(a){d.path("/checkin")})}var g=this;g.login=f}angular.module("CheckIn").controller("loginController",a),a.$inject=["$window","authenticationFactory","checkinFactory","$location","alertify"]}(),function(){function a(a,b,c,d,e){function f(){console.log(w.statusCheckin.duration),a.getUserProjects().then(g)}function g(a){angular.forEach(a.response,function(a,b){w.optionsProjects.push({value:a.id,text:a.name})})}function h(a){w.optionsTask=[],v=a,i(v),w.newCheckin.time_bill.project_id=v}function i(b){a.getProjectTask(b).then(j)}function j(a){angular.forEach(a.response,function(a,b){w.optionsTask.push({value:a.id,text:a.name,selected:!0})}),w.newCheckin.time_bill.task_id=a.response[0].id,w.newCheckin.time_bill.tran_date=w.selectedDate.dateFormat}function k(){w.dates=b.get2weeks(x)}function l(){a.getTimeBills().then(m)}function m(a){k(),w.last12Checkins=a.response,angular.forEach(w.last12Checkins,function(a,b){a.dateformat=a.date.slice(0,10)}),n(w.last12Checkins,w.dates)}function n(a,b){angular.forEach(b,function(b,c){angular.forEach(a,function(a,c){a.dateformat===b.date&&(b.checkin=!0)})}),o()}function o(){w.lastWeek=w.dates.slice(6,12),w.actualWeek=w.dates.slice(0,6),w.selectWeek=w.actualWeek}function p(a){w.selectWeek=a,q()}function q(){w.statusButton=!w.statusButton}function r(a){angular.forEach(w.dates,function(a,b){a.selected=!1})}function s(){u=w.newCheckin.time_bill,t(),""!==u.project_id&&""!==u.task_id&&""!==u.duration&&""!==u.tran_date&&""!==u.memo?a.createCheckin(w.newCheckin).then(function(a){w.checkinDone=!0,console.log(a)}):e.error("You have to complete all fields!")}function t(){""==u.project_id?w.statusCheckin.project=!0:w.statusCheckin.project=!1,""==u.task_id?w.statusCheckin.task=!0:w.statusCheckin.task=!1,""==u.duration?w.statusCheckin.duration=!0:w.statusCheckin.duration=!1,""==u.memo?w.statusCheckin.memo=!0:w.statusCheckin.memo=!1}var u,v,w=this,x=d();w.leftNavStatus=!0,w.textFormTitle="today's",w.textFormButton="add check-in",w.configProjectsSelectize={maxItems:1},w.configProjectsSelectize2={maxItems:1},w.dates=[],w.actualWeek=[],w.lastWeek=[],w.last12Checkins=[],w.selectWeek=[],w.changeWeek=p,w.statusButton=!0,w.selectedDate={dateToDisplay:moment().format("dddd, MMM D"),day:d().format("dddd"),numberday:d().format("D"),dateFormat:d().format("YYYY-MM-DD")},w.resetSelectedDates=r,w.createCheckin=s,w.getProjects=f,w.getProjectId=h,w.projectId="",w.taskId="",w.checkinDone=!1,w.statusCheckin={project:!1,task:!1,duration:!1,memo:!1},w.newCheckin={time_bill:{project_id:"",task_id:"",duration:"",tran_date:"",memo:""}},l(),f()}angular.module("CheckIn").controller("createCheckinController",a),a.$inject=["checkinFactory","getweeksFactory","$timeout","$moment","alertify"]}(),function(){function a(a,b){function c(){a.getCheckinsHistory().then(d)}function d(a){e.history=a.response}var e=this;e.getCheckinsHistory=c,e.wasDeleted=!1,c()}angular.module("CheckIn").controller("getHistoryController",a),a.$inject=["checkinFactory","alertify"]}(),function(){function a(a,b,c,d,e,f){function g(){a.getUserProjects().then(h)}function h(a){angular.forEach(a.response,function(a,b){A.optionsProjects.push({value:a.id,text:a.name})})}function i(a){A.optionsTask=[],z=a,j(z),A.newCheckin.time_bill.project_id=z}function j(b){a.getProjectTask(b).then(k)}function k(a){angular.forEach(a.response,function(a,b){A.optionsTask.push({value:a.id,text:a.name,selected:!0})}),A.newCheckin.time_bill.task_id=a.response[0].id,A.newCheckin.time_bill.tran_date=A.selectedDate.dateFormat}function l(){A.dates=b.get2weeks(w)}function m(){a.getTimeBills().then(n)}function n(a){l(),A.last12Checkins=a.response,angular.forEach(A.last12Checkins,function(a,b){a.dateformat=a.date.slice(0,10)}),o(A.last12Checkins,A.dates)}function o(a,b){angular.forEach(b,function(b,c){angular.forEach(a,function(a,c){a.dateformat===b.date&&(b.checkin=!0)})}),p()}function p(){A.lastWeek=A.dates.slice(6,12),A.actualWeek=A.dates.slice(0,6),A.selectWeek=A.actualWeek}function q(a){A.selectWeek=a,r()}function r(){A.statusButton=!A.statusButton}function s(a){angular.forEach(A.dates,function(a,b){a.selected=!1})}function t(){x=A.newCheckin.time_bill,console.log(x),u(),""!==x.project_id&&""!==x.task_id&&""!==x.duration&&""!==x.tran_date&&""!==x.memo?a.updateCheckin(A.checkinId,A.newCheckin).then(function(a){A.checkinDone=!0,console.log(a)}):e.error("You have to complete all fields!")}function u(){""==x.project_id?A.statusCheckin.project=!0:A.statusCheckin.project=!1,""==x.task_id?A.statusCheckin.task=!0:A.statusCheckin.task=!1,""==x.duration?A.statusCheckin.duration=!0:A.statusCheckin.duration=!1,""==x.memo?A.statusCheckin.memo=!0:A.statusCheckin.memo=!1}function v(){console.log(A.checkinId),y=a.returnCheckin(A.checkinId),w=y.date.slice(0,10),A.projectId=y.project.id,A.newCheckin.time_bill.duration=y.hours,A.newCheckin.time_bill.memo=y.memo,A.newCheckin.time_bill.project_id=A.projectId,A.taskId=y.task.id,A.selectedDate={dateToDisplay:d(w).format("dddd, MMM D"),day:d(w).format("dddd"),numberday:d(w).format("D"),dateFormat:d(w).format("YYYY-MM-DD")},j(A.projectId)}var w,x,y,z,A=this;A.leftNavStatus=!1,A.textFormTitle="edit",A.textFormButton="save changes",A.checkinId=f.id,A.configProjectsSelectize={maxItems:1},A.configProjectsSelectize2={maxItems:1},A.dates=[],A.actualWeek=[],A.lastWeek=[],A.last12Checkins=[],A.selectWeek=[],A.changeWeek=q,A.statusButton=!0,A.resetSelectedDates=s,A.createCheckin=t,A.getProjects=g,A.getProjectId=i,A.checkinDone=!1,A.statusCheckin={project:!1,task:!1,duration:!1,memo:!1},A.newCheckin={time_bill:{project_id:"",task_id:"",duration:"",tran_date:"",memo:""}},m(),g(),v()}angular.module("CheckIn").controller("editCheckinController",a),a.$inject=["checkinFactory","getweeksFactory","$timeout","$moment","alertify","$routeParams"]}();