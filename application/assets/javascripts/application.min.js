!function(){angular.module("CheckIn",["ngRoute","angular-google-gapi","LocalStorageModule","selectize","angular-momentjs","ngLoadingSpinner","ngAlertify"])}(),function(){function a(a){a.when("/checkin",{templateUrl:"/assets/templates/pages/checkin/index.html",controller:"createCheckinController",controllerAs:"checkinCtrl"}).when("/history",{templateUrl:"/assets/templates/pages/history/index.html",controller:"getHistoryController",controllerAs:"historyCtrl"}).when("/edit-checkin/:id",{templateUrl:"/assets/templates/pages/checkin/index.html",controller:"editCheckinController",controllerAs:"checkinCtrl"}).when("/",{templateUrl:"/assets/templates/pages/home/index.html",controller:"loginController",controllerAs:"login"}).otherwise({redirectTo:"/"})}angular.module("CheckIn").config(a),a.$inject=["$routeProvider"]}(),function(){function a(a,b,c,d,e){e.gdata=d;var f="767533878479-svf3420ha7ggdrgoqq78kuanbm777ckc.apps.googleusercontent.com";c.load("oauth2","v2"),b.setClient(f),b.setScope("https://www.googleapis.com/auth/userinfo.email")}function b(a,b,c){a.setPrefix("CheckIn").setNotify(!0,!0),b.interceptors.push("httpInterceptorFactory"),c.asyncLoading(!1).scriptUrl("//cdnjs.cloudflare.com/ajax/libs/moment.js/2.5.1/moment.min.js")}function c(){return function(a){return a.slice().reverse()}}angular.module("CheckIn").run(a),a.$inject=["$location","GAuth","GApi","GData","$rootScope"],angular.module("CheckIn").config(b),b.$inject=["localStorageServiceProvider","$httpProvider","$momentProvider"],angular.module("CheckIn").filter("reverse",c)}(),function(){function a(a,b,c,d,e){function f(){function c(a){}function d(){return b.login().then(e)}function e(){return b.getToken().then(f)}function f(b){return a.post("http://dashable-netsuite-api-prod.herokuapp.com/users/auth/google_oauth2/callback?access_token="+b.access_token).then(function(a){return g("jwt",a.data.response.jwt),a.data})}return b.checkAuth().then(c,d)}function g(a,b){return d.set(a,b)}var h={login:f};return h}angular.module("CheckIn").factory("authenticationFactory",a),a.$inject=["$http","GAuth","GData","localStorageService","alertify"]}(),function(){function a(a){var b={request:function(b){var c=a.get("jwt");return""!==c&&(b.async=!0,b.crossDomain=!0,b.headers.Authorization="Bearer "+c,b.headers["content-type"]="application/json"),b}};return b}angular.module("CheckIn").factory("httpInterceptorFactory",a),a.$inject=["localStorageService"]}(),function(){function a(a){function b(){return a.get(n+"/projects").then(function(a){q=a.data.response})}function c(){return q}function d(b){return a.get(n+"/projects/"+b+"/tasks").then(function(a){return a.data})}function e(){return a.get(n+"/time_bills/recent").then(function(a){p=a.data.response})}function f(){return p}function g(){return a.get(n+"/time_bills/history").then(function(a){o=a.data.response})}function h(){return o}function i(a){return angular.forEach(o,function(b,c){b.id==a&&(m=b)}),m}function j(b){return a.post(n+"/time_bills",b).then(function(a){return a})}function k(b){return a["delete"](n+"/time_bills/"+b).then(function(a){return a})}function l(b,c){return a.put(n+"/time_bills/"+b,c).then(function(a){return a})}var m,n="http://dashable-netsuite-api-prod.herokuapp.com/api/1",o=[],p=[],q=[],r={getUserProjects:c,fetchUserProjects:b,getProjectTask:d,fetchRecentsCheckins:e,getRecentsCheckins:f,fetchCheckinsHistory:g,getCheckinsHistory:h,createCheckin:j,deleteCheckin:k,returnCheckin:i,updateCheckin:l};return r}angular.module("CheckIn").factory("checkinFactory",a),a.$inject=["$http"]}(),function(){function a(a){function b(b){i=b,l=[],g=a(i).day("Saturday"),j=moment(g).to(i,!0),h=parseInt(j),isNaN(h)&&(h="a day"==j?1:0),l.push({day:a(i).format("dddd"),numberday:a(i).format("D"),dateToDisplay:a(i).format("dddd, MMM D"),date:a(i).format("YYYY-MM-DD"),selected:!0,checkin:!1,future:!1}),6==h?c(6):5==h?c(3):4==h?c(5):3==h?c(7):2==h?c(9):1==h?c(11):0==h&&c(13);for(var m=1;h+1>m;m++)d=a(i).add(m,"days").format("YYYY-MM-DD"),e=a(i).add(m,"days").format("dddd"),f=a(i).add(m,"days").format("D"),dateToDisplay=a(i).add(m,"days").format("dddd, MMM D"),l.unshift({day:e,numberday:f,dateToDisplay:dateToDisplay,date:d,selected:!1,checkin:!1,future:!1});return l=$.grep(l,function(a){return"Sunday"!=a.day}),k=a().format("YYYY-MM-DD"),angular.forEach(l,function(a,b){a.date>k&&(a.future=!0)}),console.log(l),l}function c(b){for(var c=1;h+b>c;c++)d=a(i).subtract(c,"days").format("YYYY-MM-DD"),e=a(i).subtract(c,"days").format("dddd"),f=a(i).subtract(c,"days").format("D"),dateToDisplay=a(i).subtract(c,"days").format("dddd, MMM D"),l.push({day:e,numberday:f,dateToDisplay:dateToDisplay,date:d,selected:!1,checkin:!1,future:!1})}var d,e,f,g,h,i,j,k,l=[],m={get2weeks:b};return m}angular.module("CheckIn").factory("getweeksFactory",a),a.$inject=["$moment"]}(),function(){function a(a,b,c,d,e){function f(){function d(d){b.confirm("Are you sure you want to delete this Check-in?",function(){console.log(d.id),vm.deleteCheckin={time_bill:{project_id:d.project.id,task_id:d.task.id,duration:d.hours,tran_date:d.date,memo:d.memo}},console.log(vm.deleteCheckin),a.deleteCheckin(d.id).then(function(b){console.log(b),vm.deleteStatus=!0,a.fetchCheckinsHistory(),c(function(){vm.deleteStatus=!1,c(function(){e.reload()},300)},4e3)})},function(){})}vm=this,vm.removeCheckin=d,vm.deleteCheckin={time_bill:{project_id:"",task_id:"",duration:"",tran_date:"",memo:""}}}var g={restrict:"E",templateUrl:"/assets/templates/pages/history/history-items.html",bindToController:{checkins:"=",deleteStatus:"="},controllerAs:"vm",controller:f};return g}angular.module("CheckIn").directive("historyItems",a),a.$inject=["checkinFactory","alertify","$timeout","$location","$route"]}(),function(){function a(){function a(){function a(a){0==a.future&&(vm.date={dateToDisplay:a.dateToDisplay,day:a.day,numberday:a.numberday,dateFormat:a.date},b(a))}function b(a){vm.resetSelectedDates(),a.selected=!0,vm.checkin.time_bill.tran_date=vm.date.dateFormat}vm=this,vm.getDate=a}var b={restrict:"E",templateUrl:"/assets/templates/pages/checkin/calendar-week.html",bindToController:{week:"=",date:"=",checkin:"=",resetSelectedDates:"&"},controllerAs:"vm",controller:a};return b}angular.module("CheckIn").directive("calendarWeek",a)}(),function(){function a(a){function b(b,c){b.initialHeight=b.initialHeight||c[0].style.height;var d=function(){c[0].style.height=b.initialHeight,c[0].style.height=""+c[0].scrollHeight+"px"};c.on("input change",d),a(d,0)}var c={restrict:"A",link:b};return c}angular.module("CheckIn").directive("elastic",a),a.$inject=["$timeout"]}(),function(){function a(a,b,c,a,d,e){function f(){c.login().then(g)}function g(b){a.fetchUserProjects().then(h)}function h(){a.fetchCheckinsHistory().then(function(){e.log("Welcome! you have signed up successfully"),d.path("/checkin")})}var i=this;i.login=f}angular.module("CheckIn").controller("loginController",a),a.$inject=["checkinFactory","$window","authenticationFactory","checkinFactory","$location","alertify"]}(),function(){function a(a,b,c,d,e,f){function g(){u=a.getUserProjects(),angular.forEach(u,function(a,b){y.optionsProjects.push({value:a.id,text:a.name})})}function h(a){y.optionsTask=[],x=a,i(x),y.newCheckin.time_bill.project_id=x,angular.forEach(u,function(a,b){a.id==x&&(y.newCheckin.time_bill.project_name=a.name)})}function i(b){a.getProjectTask(b).then(j)}function j(a){v=a.response,angular.forEach(v,function(a,b){y.optionsTask.push({value:a.id,text:a.name,selected:!0})})}function k(a){y.newCheckin.time_bill.task_id=a,angular.forEach(v,function(b,c){b.id==a&&(y.newCheckin.time_bill.task_name=b.name)})}function l(){y.dates=b.get2weeks(z)}function m(){l(),y.last12Checkins=a.getCheckinsHistory(),angular.forEach(y.last12Checkins,function(a,b){a.dateformat=a.date.slice(0,10)}),n(y.last12Checkins,y.dates)}function n(a,b){angular.forEach(b,function(b,c){angular.forEach(a,function(a,c){a.dateformat===b.date&&(b.checkin=!0)})}),o()}function o(){y.lastWeek=y.dates.slice(6,12),y.actualWeek=y.dates.slice(0,6),y.selectWeek=y.actualWeek}function p(a){y.selectWeek=a,q()}function q(){y.statusButton=!y.statusButton}function r(a){angular.forEach(y.dates,function(a,b){a.selected=!1})}function s(){y.newCheckin.time_bill.tran_date=y.selectedDate.dateFormat,w=y.newCheckin.time_bill,t(),console.log(y.newCheckin.time_bill),""!==w.project_id&&""!==w.task_id&&""!==w.duration&&""!==w.tran_date&&""!==w.memo?a.createCheckin(y.newCheckin).then(function(b){a.fetchCheckinsHistory(),y.checkinDone=!0,c(function(){y.checkinDone=!1,c(function(){f.reload()},200)},4e3)})["catch"](function(a){console.log(a)}):e.error("You have to complete all fields!")}function t(){""==w.project_id?y.statusCheckin.project=!0:y.statusCheckin.project=!1,""==w.task_id?y.statusCheckin.task=!0:y.statusCheckin.task=!1,""==w.duration?y.statusCheckin.duration=!0:y.statusCheckin.duration=!1,""==w.memo?y.statusCheckin.memo=!0:y.statusCheckin.memo=!1}var u,v,w,x,y=this,z=d();y.leftNavStatus=!0,y.textFormTitle="today's",y.textFormButton="add check-in",y.configProjectsSelectize={maxItems:1},y.configProjectsSelectize2={maxItems:1},y.dates=[],y.actualWeek=[],y.lastWeek=[],y.last12Checkins=[],y.selectWeek=[],y.optionsProjects=[],y.changeWeek=p,y.statusButton=!0,y.selectedDate={dateToDisplay:moment().format("dddd, MMM D"),day:d().format("dddd"),numberday:d().format("D"),dateFormat:d().format("YYYY-MM-DD")},y.resetSelectedDates=r,y.createCheckin=s,y.getProjectId=h,y.getTaskId=k,y.projectId="",y.taskId="",y.checkinDone=!1,y.statusCheckin={project:!1,task:!1,duration:!1,memo:!1},y.newCheckin={time_bill:{project_id:"",project_name:"",task_id:"",task_name:"",duration:"",tran_date:"",memo:""}},m(),g()}angular.module("CheckIn").controller("createCheckinController",a),a.$inject=["checkinFactory","getweeksFactory","$timeout","$moment","alertify","$route"]}(),function(){function a(a,b){var c,d=this;d.wasDeleted=!1,d.history=a.getCheckinsHistory(),angular.forEach(d.history,function(a,b){c=parseInt(a.hours[a.hours.length-1]),0===c&&(a.hours=a.hours.slice(0,1))}),console.log(d.history),console.log(c)}angular.module("CheckIn").controller("getHistoryController",a),a.$inject=["checkinFactory","alertify"]}(),function(){function a(a,b,c,d,e,f,g){function h(){y=a.getUserProjects(),angular.forEach(y,function(a,b){B.optionsProjects.push({value:a.id,text:a.name})})}function i(a){B.optionsTask=[],A=a,j(A),B.newCheckin.time_bill.project_id=A,angular.forEach(y,function(a,b){a.id==A&&(B.newCheckin.time_bill.project_name=a.name)})}function j(b){a.getProjectTask(b).then(k)}function k(a){tasks=a.response,angular.forEach(tasks,function(a,b){B.optionsTask.push({value:a.id,text:a.name,selected:!0})})}function l(a){B.newCheckin.time_bill.task_id=a,angular.forEach(tasks,function(b,c){b.id==a&&(B.newCheckin.time_bill.task_name=b.name)})}function m(){B.dates=b.get2weeks(x)}function n(){m(),B.last12Checkins=a.getCheckinsHistory(),angular.forEach(B.last12Checkins,function(a,b){a.dateformat=a.date.slice(0,10)}),o(B.last12Checkins,B.dates)}function o(a,b){angular.forEach(b,function(b,c){angular.forEach(a,function(a,c){a.dateformat===b.date&&(b.checkin=!0)})}),p()}function p(){B.lastWeek=B.dates.slice(6,12),B.actualWeek=B.dates.slice(0,6),B.selectWeek=B.actualWeek}function q(a){B.selectWeek=a,r()}function r(){B.statusButton=!B.statusButton}function s(a){angular.forEach(B.dates,function(a,b){a.selected=!1})}function t(){z=B.newCheckin.time_bill,console.log(z),u(),""!==z.project_id&&""!==z.task_id&&""!==z.duration&&""!==z.tran_date&&""!==z.memo?a.updateCheckin(B.checkinId,B.newCheckin).then(function(b){a.fetchCheckinsHistory(),B.checkinDone=!0,console.log(b),c(function(){g.path("/history")},4e3)})["catch"](function(a){console.log(a)}):e.error("You have to complete all fields!")}function u(){""==z.project_id?B.statusCheckin.project=!0:B.statusCheckin.project=!1,""==z.task_id?B.statusCheckin.task=!0:B.statusCheckin.task=!1,""==z.duration?B.statusCheckin.duration=!0:B.statusCheckin.duration=!1,""==z.memo?B.statusCheckin.memo=!0:B.statusCheckin.memo=!1}function v(){w=a.returnCheckin(B.checkinId),console.log(w),void 0!==w&&null!==w||(w={date:"",hours:"",memo:"",project:{id:"",name:""},task:{id:"",name:""}}),B.optionsTask.push({value:w.task.id,text:w.task.name}),x=w.date.slice(0,10),console.log(x),m(),B.projectId=w.project.id,B.taskId=w.task.id,B.newCheckin.time_bill.duration=w.hours,B.newCheckin.time_bill.memo=w.memo,B.newCheckin.time_bill.project_id=B.projectId,B.newCheckin.time_bill.project_name=w.project.name,B.newCheckin.time_bill.task_id=B.taskId,B.newCheckin.time_bill.task_name=w.task.name,B.selectedDate={dateToDisplay:d(x).format("dddd, MMM D"),day:d(x).format("dddd"),numberday:d(x).format("D"),dateFormat:d(x).format("YYYY-MM-DD")},B.newCheckin.time_bill.tran_date=B.selectedDate.dateFormat,console.log(B.newCheckin.time_bill)}var w,x,y,z,A,B=this;B.leftNavStatus=!1,B.textFormTitle="edit",B.textFormButton="save changes",B.checkinId=f.id,B.configProjectsSelectize={maxItems:1},B.configProjectsSelectize2={maxItems:1},B.optionsProjects=[],B.optionsTask=[],B.dates=[],B.actualWeek=[],B.lastWeek=[],B.last12Checkins=[],B.selectWeek=[],B.changeWeek=q,B.statusButton=!0,B.resetSelectedDates=s,B.createCheckin=t,B.getProjectId=i,B.getTaskId=l,B.checkinDone=!1,B.selectedDate=[],B.statusCheckin={project:!1,task:!1,duration:!1,memo:!1},B.newCheckin={time_bill:{project_id:"",project_name:"",task_id:"",task_name:"",duration:"",tran_date:"",memo:""}},h(),v(),n()}angular.module("CheckIn").controller("editCheckinController",a),a.$inject=["checkinFactory","getweeksFactory","$timeout","$moment","alertify","$routeParams","$location"]}();